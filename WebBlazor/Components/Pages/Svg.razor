@page "/p4"
@using WebBlazor.DTO
@using WebBlazor.Shared

<MudPaper Class="pa-3" Style="font-family:'Inter',system-ui,-apple-system,Helvetica;">
    <MudText Typo="Typo.h6" Class="mb-2">Conversation Timeline (0–59 min)</MudText>

    <ConversationTimelineSvg Segments="segs"
                             LaneOrder="lanes"
                             DurationMinutes="60"
                             MajorStep="5"
                             ShowLegend="true" />
</MudPaper>

@code {
    private readonly List<string> lanes = new()
  { "Customer", "IVR #1", "IVR #2", "Agent (Call)", "Agent (Wrapup)" };

    private List<TimelineSeg> segs = default!;

    protected override void OnInitialized()
    {
        // helper 0..59
        int M(int m) => m;

        segs = new()
      {
          // Llamada 1 (3–15)
          new("Customer","Call",   M(3),  M(13)),
          new("IVR #1",  "IVR",    M(3),  M(4)),
          new("IVR #2",  "IVR",    M(4),  M(6)),
          new("Agent (Call)","Wait", M(6),  M(7)),
          new("Agent (Call)","Call", M(7),  M(13)),
          new("Agent (Wrapup)","Wrapup", M(13), M(15)),

          // Llamada 2 (21–35)
          new("Customer","Call",   M(21), M(35)),
          new("IVR #1",  "IVR",    M(21), M(22)),
          new("IVR #2",  "IVR",    M(22), M(24)),
          new("Agent (Call)","Wait", M(24), M(25)),
          new("Agent (Call)","Call", M(25), M(33)),
          new("Agent (Wrapup)","Wrapup", M(33), M(35)),
      };
    }
}
