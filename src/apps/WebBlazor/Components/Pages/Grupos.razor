@page "/grupos"
@using MudBlazor
@using API.APIService

<MudGrid Class="mt-0">
    <MudItem xs="12" md="10">
        <MudDataGrid @ref="dataGrid"
                     T="GroupDTO"
                     ServerData="ServerReload"
                     Filterable="true"
                     Hover="true"
                     Dense="true"
                     Bordered="true"
                     Striped="true"
                     RowClick="GotoGroup"
                     Class="mt-1 pa-2"
                     Style="font-family: 'Inter', system-ui, -apple-system, Helvetica; font-variant-numeric: tabular-nums;">

            <ToolBarContent>
                <!-- Filtro por rango de fechas -->
                <MudDateRangePicker @bind-DateRange="Range"
                                    Label="Fechas"
                                    DateFormat="dd/MM/yyyy"
                                    Class="mr-2 mb-2" />

                <MudSpacer />

                <!-- Buscar -->
                <MudTextField T="string"
                              @bind-Value="Search"
                              Label="Buscar"
                              Variant="Variant.Outlined"
                              Adornment="Adornment.End"
                              AdornmentIcon="@Icons.Material.Filled.Search"
                              AdornmentColor="Color.Primary"
                              Immediate="true"
                              DebounceInterval="300"
                              Class="mr-2 mb-2" />

                <!-- Limpiar -->
                <MudIconButton Icon="@Icons.Material.Filled.Clear"
                               OnClick="ClearFilters"
                               Class="mr-2 mb-2" />
            </ToolBarContent>

            <Columns>
                <PropertyColumn Property="x => x.Name" Title="Grupo" Sortable="true" Filterable="true"
                                HeaderStyle="text-align:left; font-size:.95rem; font-weight:600"
                                CellStyle="max-width:280px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; text-align:left; cursor:pointer" />

                <PropertyColumn Property="x => x.DateModified" Title="Último cambio" Sortable="true" Filterable="true"
                                Format="dd/MM/yyyy HH:mm"
                                HeaderStyle="text-align:left; font-size:.95rem; font-weight:600; white-space:nowrap"
                                CellStyle="text-align:center; cursor:pointer" />
            </Columns>

            <!-- Paginación -->
            <PagerContent>
                <MudDataGridPager T="GroupDTO" />
            </PagerContent>

        </MudDataGrid>
    </MudItem>
</MudGrid>
